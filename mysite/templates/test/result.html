{% extends "base.html" %}
{% load static %}

{% block head %}
    <title>메인사이트</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" type="text/css" href="{% static 'css/test/result.css' %}">
    <!-- css -->
{% endblock %}

{% block content %}
<div class="result-container">
    <div class="coffee">
        <img class="main-img" src="/static/coffee_img/{{main_coffee.CoffeeID}}.jpg">
        <div class="coffee-name">
            <div class="content">
                <img src="/static/icon/blackoutline/{{type}}.png">
                <h2>{{main_coffee.CoffeeName}}</h2>
            </div>
        </div>
        <div class="info-header">
            <div class="info-btn">
                소개
            </div>
        </div>
        <div class="coffee-info">
            <div class="info-content">
                {{main_coffee.CoffeeInfo}}
            </div>
        </div>
    </div>
    <div class="btn-section">
        <a class="btn" href="/coffee/{{main_coffee.CoffeeID}}">원두 자세히 보러가기</a>
        <a class="btn" onclick="copyUrl()">친구한테 공유하기</a>
        <a class="btn" href="{% url 'main:subscribe_add' main_coffee.CoffeeID %}">이 원두 구독하기</a>
    </div>
    <div class="etc">
        <div class="guide">
            <h3>회원님에게 맞는 다른 원두들도 보고 가세요</h3>
        </div>
        <div class="etc-coffee">
            {% for coffee in sub_coffee %}
                <a class="coffee-wrapper" href="/coffee/{{coffee.CoffeeID}}">
                    <img class="etc-img" src="/static/coffee_img/{{coffee.CoffeeID}}.jpg">
                    <p>{{coffee.CoffeeName}}</p>
                </a>
            {% endfor %}
        </div>
    </div>
    <div class="again">
        <a class="again-btn" href="/test">테스트 다시하기</a>
    </div>
</div>

<script>
    function copyUrl() {
        var currentUrl = window.location.href;

        var tempInput = document.createElement('input');
        tempInput.value = currentUrl;

        document.body.appendChild(tempInput);

        tempInput.select();
        tempInput.setSelectionRange(0, 99999); 

        document.execCommand('copy');
        document.body.removeChild(tempInput);

        alert('클립보드에 저장되었습니다: ' + currentUrl);
    }
</script>
{% endblock %}